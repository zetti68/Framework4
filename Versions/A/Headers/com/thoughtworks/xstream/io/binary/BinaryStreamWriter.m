//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/Zetzsche/Development/SimarisCurves/com.thoughtworks.xstream/bin/src/com/thoughtworks/xstream/io/binary/BinaryStreamWriter.java
//


#line 1 "/Users/Zetzsche/Development/SimarisCurves/com.thoughtworks.xstream/bin/src/com/thoughtworks/xstream/io/binary/BinaryStreamWriter.java"

#include "IOSClass.h"
#include "J2ObjC_source.h"
#include "com/thoughtworks/xstream/io/HierarchicalStreamWriter.h"
#include "com/thoughtworks/xstream/io/StreamException.h"
#include "com/thoughtworks/xstream/io/binary/BinaryStreamWriter.h"
#include "com/thoughtworks/xstream/io/binary/Token.h"
#include "java/io/DataOutputStream.h"
#include "java/io/IOException.h"
#include "java/io/OutputStream.h"
#include "java/lang/Long.h"
#include "java/util/HashMap.h"
#include "java/util/Map.h"

@class ComThoughtworksXstreamIoBinaryBinaryStreamWriter_IdRegistry;

@interface ComThoughtworksXstreamIoBinaryBinaryStreamWriter () {
 @public
  ComThoughtworksXstreamIoBinaryBinaryStreamWriter_IdRegistry *idRegistry_;
  JavaIoDataOutputStream *out_;
  ComThoughtworksXstreamIoBinaryToken_Formatter *tokenFormatter_;
}

- (void)writeWithComThoughtworksXstreamIoBinaryToken:(ComThoughtworksXstreamIoBinaryToken *)token;

@end

J2OBJC_FIELD_SETTER(ComThoughtworksXstreamIoBinaryBinaryStreamWriter, idRegistry_, ComThoughtworksXstreamIoBinaryBinaryStreamWriter_IdRegistry *)
J2OBJC_FIELD_SETTER(ComThoughtworksXstreamIoBinaryBinaryStreamWriter, out_, JavaIoDataOutputStream *)
J2OBJC_FIELD_SETTER(ComThoughtworksXstreamIoBinaryBinaryStreamWriter, tokenFormatter_, ComThoughtworksXstreamIoBinaryToken_Formatter *)

__attribute__((unused)) static void ComThoughtworksXstreamIoBinaryBinaryStreamWriter_writeWithComThoughtworksXstreamIoBinaryToken_(ComThoughtworksXstreamIoBinaryBinaryStreamWriter *self, ComThoughtworksXstreamIoBinaryToken *token);

@interface ComThoughtworksXstreamIoBinaryBinaryStreamWriter_IdRegistry : NSObject {
 @public
  ComThoughtworksXstreamIoBinaryBinaryStreamWriter *this$0_;
  jlong nextId_;
  id<JavaUtilMap> ids_;
}

- (jlong)getIdWithNSString:(NSString *)value;

- (instancetype)initWithComThoughtworksXstreamIoBinaryBinaryStreamWriter:(ComThoughtworksXstreamIoBinaryBinaryStreamWriter *)outer$;

@end

J2OBJC_EMPTY_STATIC_INIT(ComThoughtworksXstreamIoBinaryBinaryStreamWriter_IdRegistry)

J2OBJC_FIELD_SETTER(ComThoughtworksXstreamIoBinaryBinaryStreamWriter_IdRegistry, this$0_, ComThoughtworksXstreamIoBinaryBinaryStreamWriter *)
J2OBJC_FIELD_SETTER(ComThoughtworksXstreamIoBinaryBinaryStreamWriter_IdRegistry, ids_, id<JavaUtilMap>)

__attribute__((unused)) static void ComThoughtworksXstreamIoBinaryBinaryStreamWriter_IdRegistry_initWithComThoughtworksXstreamIoBinaryBinaryStreamWriter_(ComThoughtworksXstreamIoBinaryBinaryStreamWriter_IdRegistry *self, ComThoughtworksXstreamIoBinaryBinaryStreamWriter *outer$);

__attribute__((unused)) static ComThoughtworksXstreamIoBinaryBinaryStreamWriter_IdRegistry *new_ComThoughtworksXstreamIoBinaryBinaryStreamWriter_IdRegistry_initWithComThoughtworksXstreamIoBinaryBinaryStreamWriter_(ComThoughtworksXstreamIoBinaryBinaryStreamWriter *outer$) NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(ComThoughtworksXstreamIoBinaryBinaryStreamWriter_IdRegistry)


#line 27
@implementation ComThoughtworksXstreamIoBinaryBinaryStreamWriter


#line 33
- (instancetype)initWithJavaIoOutputStream:(JavaIoOutputStream *)outputStream {
  ComThoughtworksXstreamIoBinaryBinaryStreamWriter_initWithJavaIoOutputStream_(self, outputStream);
  return self;
}


#line 37
- (void)startNodeWithNSString:(NSString *)name {
  ComThoughtworksXstreamIoBinaryBinaryStreamWriter_writeWithComThoughtworksXstreamIoBinaryToken_(self, new_ComThoughtworksXstreamIoBinaryToken_StartNode_initWithLong_([((ComThoughtworksXstreamIoBinaryBinaryStreamWriter_IdRegistry *) nil_chk(idRegistry_)) getIdWithNSString:name]));
}

- (void)startNodeWithNSString:(NSString *)name
                 withIOSClass:(IOSClass *)clazz {
  [self startNodeWithNSString:name];
}


#line 45
- (void)addAttributeWithNSString:(NSString *)name
                    withNSString:(NSString *)value {
  ComThoughtworksXstreamIoBinaryBinaryStreamWriter_writeWithComThoughtworksXstreamIoBinaryToken_(self, new_ComThoughtworksXstreamIoBinaryToken_Attribute_initWithLong_withNSString_([((ComThoughtworksXstreamIoBinaryBinaryStreamWriter_IdRegistry *) nil_chk(idRegistry_)) getIdWithNSString:name], value));
}


#line 49
- (void)setValueWithNSString:(NSString *)text {
  ComThoughtworksXstreamIoBinaryBinaryStreamWriter_writeWithComThoughtworksXstreamIoBinaryToken_(self, new_ComThoughtworksXstreamIoBinaryToken_Value_initWithNSString_(text));
}

- (void)endNode {
  ComThoughtworksXstreamIoBinaryBinaryStreamWriter_writeWithComThoughtworksXstreamIoBinaryToken_(self, new_ComThoughtworksXstreamIoBinaryToken_EndNode_init());
}

- (void)flush {
  @try {
    [((JavaIoDataOutputStream *) nil_chk(out_)) flush];
  }
  @catch (
#line 60
  JavaIoIOException *e) {
    @throw new_ComThoughtworksXstreamIoStreamException_initWithJavaLangThrowable_(e);
  }
}


#line 65
- (void)close {
  @try {
    [((JavaIoDataOutputStream *) nil_chk(out_)) close];
  }
  @catch (
#line 68
  JavaIoIOException *e) {
    @throw new_ComThoughtworksXstreamIoStreamException_initWithJavaLangThrowable_(e);
  }
}


#line 73
- (id<ComThoughtworksXstreamIoHierarchicalStreamWriter>)underlyingWriter {
  return self;
}

- (void)writeWithComThoughtworksXstreamIoBinaryToken:(ComThoughtworksXstreamIoBinaryToken *)token {
  ComThoughtworksXstreamIoBinaryBinaryStreamWriter_writeWithComThoughtworksXstreamIoBinaryToken_(self, token);
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithJavaIoOutputStream:", "BinaryStreamWriter", NULL, 0x1, NULL, NULL },
    { "startNodeWithNSString:", "startNode", "V", 0x1, NULL, NULL },
    { "startNodeWithNSString:withIOSClass:", "startNode", "V", 0x1, NULL, NULL },
    { "addAttributeWithNSString:withNSString:", "addAttribute", "V", 0x1, NULL, NULL },
    { "setValueWithNSString:", "setValue", "V", 0x1, NULL, NULL },
    { "endNode", NULL, "V", 0x1, NULL, NULL },
    { "flush", NULL, "V", 0x1, NULL, NULL },
    { "close", NULL, "V", 0x1, NULL, NULL },
    { "underlyingWriter", NULL, "Lcom.thoughtworks.xstream.io.HierarchicalStreamWriter;", 0x1, NULL, NULL },
    { "writeWithComThoughtworksXstreamIoBinaryToken:", "write", "V", 0x2, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "idRegistry_", NULL, 0x12, "Lcom.thoughtworks.xstream.io.binary.BinaryStreamWriter$IdRegistry;", NULL, NULL,  },
    { "out_", NULL, 0x12, "Ljava.io.DataOutputStream;", NULL, NULL,  },
    { "tokenFormatter_", NULL, 0x12, "Lcom.thoughtworks.xstream.io.binary.Token$Formatter;", NULL, NULL,  },
  };
  static const char *inner_classes[] = {"Lcom.thoughtworks.xstream.io.binary.BinaryStreamWriter$IdRegistry;"};
  static const J2ObjcClassInfo _ComThoughtworksXstreamIoBinaryBinaryStreamWriter = { 2, "BinaryStreamWriter", "com.thoughtworks.xstream.io.binary", NULL, 0x1, 10, methods, 3, fields, 0, NULL, 1, inner_classes, NULL, NULL };
  return &_ComThoughtworksXstreamIoBinaryBinaryStreamWriter;
}

@end


#line 33
void ComThoughtworksXstreamIoBinaryBinaryStreamWriter_initWithJavaIoOutputStream_(ComThoughtworksXstreamIoBinaryBinaryStreamWriter *self, JavaIoOutputStream *outputStream) {
  (void) NSObject_init(self);
  self->idRegistry_ = new_ComThoughtworksXstreamIoBinaryBinaryStreamWriter_IdRegistry_initWithComThoughtworksXstreamIoBinaryBinaryStreamWriter_(self);
  self->tokenFormatter_ = new_ComThoughtworksXstreamIoBinaryToken_Formatter_init();
  
#line 34
  self->out_ = new_JavaIoDataOutputStream_initWithJavaIoOutputStream_(outputStream);
}


#line 33
ComThoughtworksXstreamIoBinaryBinaryStreamWriter *new_ComThoughtworksXstreamIoBinaryBinaryStreamWriter_initWithJavaIoOutputStream_(JavaIoOutputStream *outputStream) {
  ComThoughtworksXstreamIoBinaryBinaryStreamWriter *self = [ComThoughtworksXstreamIoBinaryBinaryStreamWriter alloc];
  ComThoughtworksXstreamIoBinaryBinaryStreamWriter_initWithJavaIoOutputStream_(self, outputStream);
  return self;
}


#line 77
void ComThoughtworksXstreamIoBinaryBinaryStreamWriter_writeWithComThoughtworksXstreamIoBinaryToken_(ComThoughtworksXstreamIoBinaryBinaryStreamWriter *self, ComThoughtworksXstreamIoBinaryToken *token) {
  @try {
    [((ComThoughtworksXstreamIoBinaryToken_Formatter *) nil_chk(self->tokenFormatter_)) writeWithJavaIoDataOutput:self->out_ withComThoughtworksXstreamIoBinaryToken:token];
  }
  @catch (
#line 80
  JavaIoIOException *e) {
    @throw new_ComThoughtworksXstreamIoStreamException_initWithJavaLangThrowable_(e);
  }
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ComThoughtworksXstreamIoBinaryBinaryStreamWriter)


#line 85
@implementation ComThoughtworksXstreamIoBinaryBinaryStreamWriter_IdRegistry


#line 90
- (jlong)getIdWithNSString:(NSString *)value {
  JavaLangLong *id_ = (JavaLangLong *) check_class_cast([((id<JavaUtilMap>) nil_chk(ids_)) getWithId:value], [JavaLangLong class]);
  if (id_ == nil) {
    id_ = JavaLangLong_valueOfWithLong_(++nextId_);
    (void) [ids_ putWithId:value withId:id_];
    ComThoughtworksXstreamIoBinaryBinaryStreamWriter_writeWithComThoughtworksXstreamIoBinaryToken_(this$0_, new_ComThoughtworksXstreamIoBinaryToken_MapIdToValue_initWithLong_withNSString_([id_ longLongValue], value));
  }
  return [((JavaLangLong *) nil_chk(id_)) longLongValue];
}

- (instancetype)initWithComThoughtworksXstreamIoBinaryBinaryStreamWriter:(ComThoughtworksXstreamIoBinaryBinaryStreamWriter *)outer$ {
  ComThoughtworksXstreamIoBinaryBinaryStreamWriter_IdRegistry_initWithComThoughtworksXstreamIoBinaryBinaryStreamWriter_(self, outer$);
  return self;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "getIdWithNSString:", "getId", "J", 0x1, NULL, NULL },
    { "initWithComThoughtworksXstreamIoBinaryBinaryStreamWriter:", "init", NULL, 0x0, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "this$0_", NULL, 0x1012, "Lcom.thoughtworks.xstream.io.binary.BinaryStreamWriter;", NULL, NULL,  },
    { "nextId_", NULL, 0x2, "J", NULL, NULL,  },
    { "ids_", NULL, 0x2, "Ljava.util.Map;", NULL, NULL,  },
  };
  static const J2ObjcClassInfo _ComThoughtworksXstreamIoBinaryBinaryStreamWriter_IdRegistry = { 2, "IdRegistry", "com.thoughtworks.xstream.io.binary", "BinaryStreamWriter", 0x2, 2, methods, 3, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_ComThoughtworksXstreamIoBinaryBinaryStreamWriter_IdRegistry;
}

@end

void ComThoughtworksXstreamIoBinaryBinaryStreamWriter_IdRegistry_initWithComThoughtworksXstreamIoBinaryBinaryStreamWriter_(ComThoughtworksXstreamIoBinaryBinaryStreamWriter_IdRegistry *self, ComThoughtworksXstreamIoBinaryBinaryStreamWriter *outer$) {
  self->this$0_ = outer$;
  (void) NSObject_init(self);
  self->nextId_ =
#line 87
  0;
  self->ids_ = new_JavaUtilHashMap_init();
}

ComThoughtworksXstreamIoBinaryBinaryStreamWriter_IdRegistry *new_ComThoughtworksXstreamIoBinaryBinaryStreamWriter_IdRegistry_initWithComThoughtworksXstreamIoBinaryBinaryStreamWriter_(ComThoughtworksXstreamIoBinaryBinaryStreamWriter *outer$) {
  ComThoughtworksXstreamIoBinaryBinaryStreamWriter_IdRegistry *self = [ComThoughtworksXstreamIoBinaryBinaryStreamWriter_IdRegistry alloc];
  ComThoughtworksXstreamIoBinaryBinaryStreamWriter_IdRegistry_initWithComThoughtworksXstreamIoBinaryBinaryStreamWriter_(self, outer$);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ComThoughtworksXstreamIoBinaryBinaryStreamWriter_IdRegistry)
