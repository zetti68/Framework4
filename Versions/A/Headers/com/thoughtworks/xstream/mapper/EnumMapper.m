//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/Zetzsche/Development/SimarisCurves/com.thoughtworks.xstream/bin/src/com/thoughtworks/xstream/mapper/EnumMapper.java
//


#line 1 "/Users/Zetzsche/Development/SimarisCurves/com.thoughtworks.xstream/bin/src/com/thoughtworks/xstream/mapper/EnumMapper.java"

#include "IOSClass.h"
#include "J2ObjC_source.h"
#include "com/thoughtworks/xstream/converters/ConverterLookup.h"
#include "com/thoughtworks/xstream/converters/SingleValueConverter.h"
#include "com/thoughtworks/xstream/converters/enums/EnumSingleValueConverter.h"
#include "com/thoughtworks/xstream/mapper/AttributeMapper.h"
#include "com/thoughtworks/xstream/mapper/EnumMapper.h"
#include "com/thoughtworks/xstream/mapper/Mapper.h"
#include "com/thoughtworks/xstream/mapper/MapperWrapper.h"
#include "java/lang/Deprecated.h"
#include "java/lang/Enum.h"
#include "java/util/EnumSet.h"
#include "java/util/HashMap.h"
#include "java/util/Map.h"

@interface ComThoughtworksXstreamMapperEnumMapper () {
 @public
  ComThoughtworksXstreamMapperAttributeMapper *attributeMapper_;
  id<JavaUtilMap> enumConverterMap_;
}

- (id<ComThoughtworksXstreamConvertersSingleValueConverter>)getLocalConverterWithNSString:(NSString *)fieldName
                                                                             withIOSClass:(IOSClass *)type
                                                                             withIOSClass:(IOSClass *)definedIn;

- (id)readResolve;

@end

J2OBJC_FIELD_SETTER(ComThoughtworksXstreamMapperEnumMapper, attributeMapper_, ComThoughtworksXstreamMapperAttributeMapper *)
J2OBJC_FIELD_SETTER(ComThoughtworksXstreamMapperEnumMapper, enumConverterMap_, id<JavaUtilMap>)

__attribute__((unused)) static id ComThoughtworksXstreamMapperEnumMapper_readResolve(ComThoughtworksXstreamMapperEnumMapper *self);


#line 33
@implementation ComThoughtworksXstreamMapperEnumMapper


#line 42
- (instancetype)initWithComThoughtworksXstreamMapperMapper:(id<ComThoughtworksXstreamMapperMapper>)wrapped
       withComThoughtworksXstreamConvertersConverterLookup:(id<ComThoughtworksXstreamConvertersConverterLookup>)lookup {
  ComThoughtworksXstreamMapperEnumMapper_initWithComThoughtworksXstreamMapperMapper_withComThoughtworksXstreamConvertersConverterLookup_(self, wrapped, lookup);
  return self;
}


#line 47
- (instancetype)initWithComThoughtworksXstreamMapperMapper:(id<ComThoughtworksXstreamMapperMapper>)wrapped {
  ComThoughtworksXstreamMapperEnumMapper_initWithComThoughtworksXstreamMapperMapper_(self, wrapped);
  return self;
}


#line 53
- (NSString *)serializedClassWithIOSClass:(IOSClass *)type {
  if (type == nil) {
    return [super serializedClassWithIOSClass:type];
  }
  if ([JavaLangEnum_class_() isAssignableFrom:type] && [((IOSClass *) nil_chk(type)) getSuperclass] != JavaLangEnum_class_()) {
    return [super serializedClassWithIOSClass:[type getSuperclass]];
  }
  else
#line 59
  if ([JavaUtilEnumSet_class_() isAssignableFrom:type]) {
    return [super serializedClassWithIOSClass:JavaUtilEnumSet_class_()];
  }
  else {
    
#line 62
    return [super serializedClassWithIOSClass:type];
  }
}


#line 67
- (jboolean)isImmutableValueTypeWithIOSClass:(IOSClass *)type {
  return ([JavaLangEnum_class_() isAssignableFrom:type]) || [super isImmutableValueTypeWithIOSClass:type];
}


#line 72
- (id<ComThoughtworksXstreamConvertersSingleValueConverter>)getConverterFromItemTypeWithNSString:(NSString *)fieldName
                                                                                    withIOSClass:(IOSClass *)type
                                                                                    withIOSClass:(IOSClass *)definedIn {
  
#line 74
  id<ComThoughtworksXstreamConvertersSingleValueConverter> converter = [self getLocalConverterWithNSString:fieldName withIOSClass:type withIOSClass:definedIn];
  return converter == nil ?
#line 76
  [super getConverterFromItemTypeWithNSString:fieldName withIOSClass:type withIOSClass:definedIn] :
#line 77
  converter;
}


#line 81
- (id<ComThoughtworksXstreamConvertersSingleValueConverter>)getConverterFromAttributeWithIOSClass:(IOSClass *)definedIn
                                                                                     withNSString:(NSString *)attribute
                                                                                     withIOSClass:(IOSClass *)type {
  
#line 83
  id<ComThoughtworksXstreamConvertersSingleValueConverter> converter = [self getLocalConverterWithNSString:attribute withIOSClass:type withIOSClass:definedIn];
  return converter == nil ?
#line 85
  [super getConverterFromAttributeWithIOSClass:definedIn withNSString:attribute withIOSClass:type] :
#line 86
  converter;
}


#line 89
- (id<ComThoughtworksXstreamConvertersSingleValueConverter>)getLocalConverterWithNSString:(NSString *)fieldName
                                                                             withIOSClass:(IOSClass *)type
                                                                             withIOSClass:(IOSClass *)definedIn {
  if (attributeMapper_ != nil &&
#line 91
  [JavaLangEnum_class_() isAssignableFrom:type] &&
#line 92
  [attributeMapper_ shouldLookForSingleValueConverterWithNSString:fieldName withIOSClass:type withIOSClass:definedIn]) {
    @synchronized(enumConverterMap_) {
      id<ComThoughtworksXstreamConvertersSingleValueConverter> singleValueConverter = [((id<JavaUtilMap>) nil_chk(enumConverterMap_)) getWithId:type];
      if (singleValueConverter == nil) {
        singleValueConverter = [super getConverterFromItemTypeWithNSString:fieldName withIOSClass:type withIOSClass:definedIn];
        if (singleValueConverter == nil) {
          IOSClass *
#line 99
          enumType = type;
          singleValueConverter = new_ComThoughtworksXstreamConvertersEnumsEnumSingleValueConverter_initWithIOSClass_(enumType);
        }
        (void) [enumConverterMap_ putWithId:type withId:singleValueConverter];
      }
      return singleValueConverter;
    }
  }
  return nil;
}


#line 110
- (void)flushCache {
  if ([((id<JavaUtilMap>) nil_chk(enumConverterMap_)) size] > 0) {
    @synchronized(enumConverterMap_) {
      [enumConverterMap_ clear];
    }
  }
}

- (id)readResolve {
  return ComThoughtworksXstreamMapperEnumMapper_readResolve(self);
}

+ (IOSObjectArray *)__annotations_initWithComThoughtworksXstreamMapperMapper_withComThoughtworksXstreamConvertersConverterLookup_ {
  return [IOSObjectArray arrayWithObjects:(id[]) { [[JavaLangDeprecated alloc] init] } count:1 type:JavaLangAnnotationAnnotation_class_()];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithComThoughtworksXstreamMapperMapper:withComThoughtworksXstreamConvertersConverterLookup:", "EnumMapper", NULL, 0x1, NULL, NULL },
    { "initWithComThoughtworksXstreamMapperMapper:", "EnumMapper", NULL, 0x1, NULL, NULL },
    { "serializedClassWithIOSClass:", "serializedClass", "Ljava.lang.String;", 0x1, NULL, NULL },
    { "isImmutableValueTypeWithIOSClass:", "isImmutableValueType", "Z", 0x1, NULL, NULL },
    { "getConverterFromItemTypeWithNSString:withIOSClass:withIOSClass:", "getConverterFromItemType", "Lcom.thoughtworks.xstream.converters.SingleValueConverter;", 0x1, NULL, NULL },
    { "getConverterFromAttributeWithIOSClass:withNSString:withIOSClass:", "getConverterFromAttribute", "Lcom.thoughtworks.xstream.converters.SingleValueConverter;", 0x1, NULL, NULL },
    { "getLocalConverterWithNSString:withIOSClass:withIOSClass:", "getLocalConverter", "Lcom.thoughtworks.xstream.converters.SingleValueConverter;", 0x2, NULL, NULL },
    { "flushCache", NULL, "V", 0x1, NULL, NULL },
    { "readResolve", NULL, "Ljava.lang.Object;", 0x2, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "attributeMapper_", NULL, 0x82, "Lcom.thoughtworks.xstream.mapper.AttributeMapper;", NULL, NULL,  },
    { "enumConverterMap_", NULL, 0x82, "Ljava.util.Map;", NULL, "Ljava/util/Map<Ljava/lang/Class;Lcom/thoughtworks/xstream/converters/SingleValueConverter;>;",  },
  };
  static const J2ObjcClassInfo _ComThoughtworksXstreamMapperEnumMapper = { 2, "EnumMapper", "com.thoughtworks.xstream.mapper", NULL, 0x1, 9, methods, 2, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_ComThoughtworksXstreamMapperEnumMapper;
}

@end


#line 42
void ComThoughtworksXstreamMapperEnumMapper_initWithComThoughtworksXstreamMapperMapper_withComThoughtworksXstreamConvertersConverterLookup_(ComThoughtworksXstreamMapperEnumMapper *self, id<ComThoughtworksXstreamMapperMapper> wrapped, id<ComThoughtworksXstreamConvertersConverterLookup> lookup) {
  (void) ComThoughtworksXstreamMapperMapperWrapper_initWithComThoughtworksXstreamMapperMapper_(self, wrapped);
  (void) ComThoughtworksXstreamMapperEnumMapper_readResolve(self);
}


#line 42
ComThoughtworksXstreamMapperEnumMapper *new_ComThoughtworksXstreamMapperEnumMapper_initWithComThoughtworksXstreamMapperMapper_withComThoughtworksXstreamConvertersConverterLookup_(id<ComThoughtworksXstreamMapperMapper> wrapped, id<ComThoughtworksXstreamConvertersConverterLookup> lookup) {
  ComThoughtworksXstreamMapperEnumMapper *self = [ComThoughtworksXstreamMapperEnumMapper alloc];
  ComThoughtworksXstreamMapperEnumMapper_initWithComThoughtworksXstreamMapperMapper_withComThoughtworksXstreamConvertersConverterLookup_(self, wrapped, lookup);
  return self;
}


#line 47
void ComThoughtworksXstreamMapperEnumMapper_initWithComThoughtworksXstreamMapperMapper_(ComThoughtworksXstreamMapperEnumMapper *self, id<ComThoughtworksXstreamMapperMapper> wrapped) {
  (void) ComThoughtworksXstreamMapperMapperWrapper_initWithComThoughtworksXstreamMapperMapper_(self, wrapped);
  (void) ComThoughtworksXstreamMapperEnumMapper_readResolve(self);
}


#line 47
ComThoughtworksXstreamMapperEnumMapper *new_ComThoughtworksXstreamMapperEnumMapper_initWithComThoughtworksXstreamMapperMapper_(id<ComThoughtworksXstreamMapperMapper> wrapped) {
  ComThoughtworksXstreamMapperEnumMapper *self = [ComThoughtworksXstreamMapperEnumMapper alloc];
  ComThoughtworksXstreamMapperEnumMapper_initWithComThoughtworksXstreamMapperMapper_(self, wrapped);
  return self;
}


#line 118
id ComThoughtworksXstreamMapperEnumMapper_readResolve(ComThoughtworksXstreamMapperEnumMapper *self) {
  self->enumConverterMap_ = new_JavaUtilHashMap_init();
  self->attributeMapper_ = (ComThoughtworksXstreamMapperAttributeMapper *) check_class_cast([self lookupMapperOfTypeWithIOSClass:ComThoughtworksXstreamMapperAttributeMapper_class_()], [ComThoughtworksXstreamMapperAttributeMapper class]);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ComThoughtworksXstreamMapperEnumMapper)
