//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/Zetzsche/Development/SimarisCurves/com.thoughtworks.xstream/bin/src/com/thoughtworks/xstream/mapper/PackageAliasingMapper.java
//


#line 1 "/Users/Zetzsche/Development/SimarisCurves/com.thoughtworks.xstream/bin/src/com/thoughtworks/xstream/mapper/PackageAliasingMapper.java"

#include "IOSClass.h"
#include "J2ObjC_source.h"
#include "com/thoughtworks/xstream/mapper/Mapper.h"
#include "com/thoughtworks/xstream/mapper/MapperWrapper.h"
#include "com/thoughtworks/xstream/mapper/PackageAliasingMapper.h"
#include "java/io/IOException.h"
#include "java/io/ObjectInputStream.h"
#include "java/io/ObjectOutputStream.h"
#include "java/lang/ClassNotFoundException.h"
#include "java/util/Comparator.h"
#include "java/util/HashMap.h"
#include "java/util/Iterator.h"
#include "java/util/Map.h"
#include "java/util/Set.h"
#include "java/util/TreeMap.h"

@interface ComThoughtworksXstreamMapperPackageAliasingMapper () {
 @public
  id<JavaUtilMap> packageToName_;
}

- (void)writeObjectWithJavaIoObjectOutputStream:(JavaIoObjectOutputStream *)outArg;

- (void)readObjectWithJavaIoObjectInputStream:(JavaIoObjectInputStream *)inArg;

@end

J2OBJC_FIELD_SETTER(ComThoughtworksXstreamMapperPackageAliasingMapper, packageToName_, id<JavaUtilMap>)

static id<JavaUtilComparator> ComThoughtworksXstreamMapperPackageAliasingMapper_REVERSE_;
J2OBJC_STATIC_FIELD_GETTER(ComThoughtworksXstreamMapperPackageAliasingMapper, REVERSE_, id<JavaUtilComparator>)

@interface ComThoughtworksXstreamMapperPackageAliasingMapper_$1 : NSObject < JavaUtilComparator >

- (jint)compareWithId:(id)o1
               withId:(id)o2;

- (instancetype)init;

@end

J2OBJC_EMPTY_STATIC_INIT(ComThoughtworksXstreamMapperPackageAliasingMapper_$1)

__attribute__((unused)) static void ComThoughtworksXstreamMapperPackageAliasingMapper_$1_init(ComThoughtworksXstreamMapperPackageAliasingMapper_$1 *self);

__attribute__((unused)) static ComThoughtworksXstreamMapperPackageAliasingMapper_$1 *new_ComThoughtworksXstreamMapperPackageAliasingMapper_$1_init() NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(ComThoughtworksXstreamMapperPackageAliasingMapper_$1)

J2OBJC_INITIALIZED_DEFN(ComThoughtworksXstreamMapperPackageAliasingMapper)


#line 29
@implementation ComThoughtworksXstreamMapperPackageAliasingMapper


#line 41
- (instancetype)initWithComThoughtworksXstreamMapperMapper:(id<ComThoughtworksXstreamMapperMapper>)wrapped {
  ComThoughtworksXstreamMapperPackageAliasingMapper_initWithComThoughtworksXstreamMapperMapper_(self, wrapped);
  return self;
}


#line 45
- (void)addPackageAliasWithNSString:(NSString *)name
                       withNSString:(NSString *)pkg {
  if (((jint) [((NSString *) nil_chk(name)) length]) > 0 && [name charAtWithInt:((jint) [name length]) - 1] != '.') {
    name = JreStrcat("$C", name, '.');
  }
  if (((jint) [((NSString *) nil_chk(pkg)) length]) > 0 && [pkg charAtWithInt:((jint) [pkg length]) - 1] != '.') {
    pkg = JreStrcat("$C", pkg, '.');
  }
  (void) [((id<JavaUtilMap>) nil_chk(nameToPackage_)) putWithId:name withId:pkg];
  (void) [((id<JavaUtilMap>) nil_chk(packageToName_)) putWithId:pkg withId:name];
}


#line 56
- (NSString *)serializedClassWithIOSClass:(IOSClass *)type {
  NSString *className_ = [((IOSClass *) nil_chk(type)) getName];
  jint length = ((jint) [((NSString *) nil_chk(className_)) length]);
  jint dot = -1;
  do {
    dot = [className_ lastIndexOf:'.' fromIndex:length];
    NSString *pkg = dot < 0 ? @"" : [className_ substring:0 endIndex:dot + 1];
    NSString *alias = (NSString *) check_class_cast([((id<JavaUtilMap>) nil_chk(packageToName_)) getWithId:pkg], [NSString class]);
    if (alias != nil) {
      return JreStrcat("$$", alias, (dot < 0 ? className_ : [className_ substring:dot + 1]));
    }
    length = dot - 1;
  }
  while (
#line 68
  dot >= 0);
  return [super serializedClassWithIOSClass:type];
}


#line 72
- (IOSClass *)realClassWithNSString:(NSString *)elementName {
  jint length = ((jint) [((NSString *) nil_chk(elementName)) length]);
  jint dot = -1;
  do {
    dot = [elementName lastIndexOf:'.' fromIndex:length];
    NSString *name = dot < 0 ? @"" : JreStrcat("$C", [elementName substring:0 endIndex:dot], '.');
    NSString *packageName = (NSString *) check_class_cast([((id<JavaUtilMap>) nil_chk(nameToPackage_)) getWithId:name], [NSString class]);
    
#line 80
    if (packageName != nil) {
      elementName = JreStrcat("$$", packageName,
#line 82
      (dot < 0 ? elementName : [elementName substring:dot + 1]));
      break;
    }
    length = dot - 1;
  }
  while (
#line 86
  dot >= 0);
  
#line 88
  return [super realClassWithNSString:elementName];
}


#line 91
- (void)writeObjectWithJavaIoObjectOutputStream:(JavaIoObjectOutputStream *)outArg {
  [((JavaIoObjectOutputStream *) nil_chk(outArg)) writeObjectWithId:new_JavaUtilHashMap_initWithJavaUtilMap_(packageToName_)];
}

- (void)readObjectWithJavaIoObjectInputStream:(JavaIoObjectInputStream *)inArg {
  
#line 97
  packageToName_ = new_JavaUtilTreeMap_initWithJavaUtilComparator_(ComThoughtworksXstreamMapperPackageAliasingMapper_REVERSE_);
  [packageToName_ putAllWithJavaUtilMap:(id<JavaUtilMap>) check_protocol_cast([((JavaIoObjectInputStream *) nil_chk(inArg)) readObject], @protocol(JavaUtilMap))];
  nameToPackage_ = new_JavaUtilHashMap_init();
  for (id<JavaUtilIterator> iter = [((id<JavaUtilSet>) nil_chk([packageToName_ keySet])) iterator]; [((id<JavaUtilIterator>) nil_chk(iter)) hasNext]; ) {
    id type = [iter next];
    (void) [nameToPackage_ putWithId:[packageToName_ getWithId:type] withId:type];
  }
}

+ (void)initialize {
  if (self == [ComThoughtworksXstreamMapperPackageAliasingMapper class]) {
    ComThoughtworksXstreamMapperPackageAliasingMapper_REVERSE_ = new_ComThoughtworksXstreamMapperPackageAliasingMapper_$1_init();
    J2OBJC_SET_INITIALIZED(ComThoughtworksXstreamMapperPackageAliasingMapper)
  }
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithComThoughtworksXstreamMapperMapper:", "PackageAliasingMapper", NULL, 0x1, NULL, NULL },
    { "addPackageAliasWithNSString:withNSString:", "addPackageAlias", "V", 0x1, NULL, NULL },
    { "serializedClassWithIOSClass:", "serializedClass", "Ljava.lang.String;", 0x1, NULL, NULL },
    { "realClassWithNSString:", "realClass", "Ljava.lang.Class;", 0x1, NULL, NULL },
    { "writeObjectWithJavaIoObjectOutputStream:", "writeObject", "V", 0x2, "Ljava.io.IOException;", NULL },
    { "readObjectWithJavaIoObjectInputStream:", "readObject", "V", 0x2, "Ljava.io.IOException;Ljava.lang.ClassNotFoundException;", NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "REVERSE_", NULL, 0x1a, "Ljava.util.Comparator;", &ComThoughtworksXstreamMapperPackageAliasingMapper_REVERSE_, NULL,  },
    { "packageToName_", NULL, 0x2, "Ljava.util.Map;", NULL, NULL,  },
    { "nameToPackage_", NULL, 0x84, "Ljava.util.Map;", NULL, NULL,  },
  };
  static const J2ObjcClassInfo _ComThoughtworksXstreamMapperPackageAliasingMapper = { 2, "PackageAliasingMapper", "com.thoughtworks.xstream.mapper", NULL, 0x1, 6, methods, 3, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_ComThoughtworksXstreamMapperPackageAliasingMapper;
}

@end


#line 41
void ComThoughtworksXstreamMapperPackageAliasingMapper_initWithComThoughtworksXstreamMapperMapper_(ComThoughtworksXstreamMapperPackageAliasingMapper *self, id<ComThoughtworksXstreamMapperMapper> wrapped) {
  (void) ComThoughtworksXstreamMapperMapperWrapper_initWithComThoughtworksXstreamMapperMapper_(self, wrapped);
  self->packageToName_ = new_JavaUtilTreeMap_initWithJavaUtilComparator_(ComThoughtworksXstreamMapperPackageAliasingMapper_REVERSE_);
  self->nameToPackage_ = new_JavaUtilHashMap_init();
}


#line 41
ComThoughtworksXstreamMapperPackageAliasingMapper *new_ComThoughtworksXstreamMapperPackageAliasingMapper_initWithComThoughtworksXstreamMapperMapper_(id<ComThoughtworksXstreamMapperMapper> wrapped) {
  ComThoughtworksXstreamMapperPackageAliasingMapper *self = [ComThoughtworksXstreamMapperPackageAliasingMapper alloc];
  ComThoughtworksXstreamMapperPackageAliasingMapper_initWithComThoughtworksXstreamMapperMapper_(self, wrapped);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ComThoughtworksXstreamMapperPackageAliasingMapper)

@implementation ComThoughtworksXstreamMapperPackageAliasingMapper_$1


#line 33
- (jint)compareWithId:(id)o1
               withId:(id)o2 {
  return [((NSString *) nil_chk(((NSString *) check_class_cast(o2, [NSString class])))) compareToWithId:(NSString *) check_class_cast(o1, [NSString class])];
}

- (instancetype)init {
  ComThoughtworksXstreamMapperPackageAliasingMapper_$1_init(self);
  return self;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "compareWithId:withId:", "compare", "I", 0x1, NULL, NULL },
    { "init", "", NULL, 0x0, NULL, NULL },
  };
  static const J2ObjcClassInfo _ComThoughtworksXstreamMapperPackageAliasingMapper_$1 = { 2, "", "com.thoughtworks.xstream.mapper", "PackageAliasingMapper", 0x8008, 2, methods, 0, NULL, 0, NULL, 0, NULL, NULL, NULL };
  return &_ComThoughtworksXstreamMapperPackageAliasingMapper_$1;
}

@end

void ComThoughtworksXstreamMapperPackageAliasingMapper_$1_init(ComThoughtworksXstreamMapperPackageAliasingMapper_$1 *self) {
  (void) NSObject_init(self);
}

ComThoughtworksXstreamMapperPackageAliasingMapper_$1 *new_ComThoughtworksXstreamMapperPackageAliasingMapper_$1_init() {
  ComThoughtworksXstreamMapperPackageAliasingMapper_$1 *self = [ComThoughtworksXstreamMapperPackageAliasingMapper_$1 alloc];
  ComThoughtworksXstreamMapperPackageAliasingMapper_$1_init(self);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ComThoughtworksXstreamMapperPackageAliasingMapper_$1)
